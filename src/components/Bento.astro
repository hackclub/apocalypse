<article class="flex justify-center lg:pb-16" id="infosection">
  <section class="flex max-w-5xl flex-col gap-4">
    <div class="flex flex-col lg:flex-row lg:gap-4">
      <div
        class="flex flex-col gap-3 bg-gradient-to-br from-fuchsia-700 to-purple-800 bg-300% bg-pos-100 p-8 motion-safe:transition-all motion-safe:duration-500 motion-safe:hover:bg-pos-0"
      >
        <h2 class="text-4xl font-bold text-white">What‚Äôs a hackathon?</h2>
        <div class="space-y-3 font-sans">
          <p>
            A social coding marathon! Imagine a weekend where teenagers come together to
            code projects for fun‚Äîhowever goofy or janky‚Äîand share them with each other.
          </p>
          <p>
            You‚Äôll have a goal to work towards, side quests to tackle, and new friends to
            hang out with. You don‚Äôt need coding experience‚Äîjust an open mind.
          </p>
        </div>
      </div>

      <iframe
        class="aspect-video w-full lg:w-[36rem] lg:shrink-0"
        src="https://www.youtube.com/embed/PnK4gzO6S3Q?si=VgYF42Z0y3BOOhcQ"
        title="YouTube video player"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen></iframe>
    </div>

    <div class="flex flex-col-reverse lg:h-80 lg:flex-row lg:gap-4">
      <img
        src="https://res.cloudinary.com/dacrrezls/image/upload/f_auto,q_auto/ux6lup3yxt5mv62j329t"
        class="h-[20rem] object-cover motion-safe:transition-all motion-safe:hover:-rotate-1 motion-safe:hover:scale-105 motion-safe:hover:shadow-lg lg:h-auto lg:w-[36rem] lg:shrink-0"
      />

      <div
        class="flex grow flex-col gap-3 bg-primary-bg p-8 transition-all motion-safe:duration-500 motion-safe:hover:bg-violet-900"
      >
        <h2 class="text-4xl font-bold text-white">Build what you love</h2>
        <div class="space-y-3 font-sans">
          <p>
            At Apocalypse, don‚Äôt worry about being realistic. Build the projects that‚Äôd
            never make sense IRL, but would be perfect for tackling the zombies‚Äîfrom
            post-apocalyptic food delivery to zombie-sized mousetraps.
          </p>
          <p>
            Worried about how you‚Äôll do it all? Fear not; you can always receive 1:1 help
            from experienced mentors.
          </p>
        </div>
      </div>
    </div>

    <div class="flex flex-col lg:h-80 lg:flex-row lg:gap-4">
      <div
        class="flex grow flex-col gap-3 bg-primary-bg p-8 motion-safe:duration-500 motion-safe:hover:bg-violet-900"
      >
        <h2 class="text-4xl font-bold text-white">Share your knowledge</h2>
        <div class="space-y-3 font-sans">
          <p>
            Silly or serious, technical or not, Apocalypse is a space to share what you
            know and learn from others.
          </p>
          <p>
            What‚Äôs a skill you have? Run a workshop on it‚Äîwe‚Äôll pay for your supplies! And
            is there something you‚Äôd love to yap on? Do a lighting talk, like ‚Äúwhy I hate
            caffeine (controversial)‚Äù.
          </p>
        </div>
      </div>

      <img
        class="h-[20rem] object-cover motion-safe:transition-all motion-safe:hover:rotate-1 motion-safe:hover:scale-105 motion-safe:hover:shadow-lg lg:h-auto lg:w-[36rem] lg:shrink-0"
        src="https://res.cloudinary.com/dacrrezls/image/upload/v1711770399/Hack_Club_Assemble_LTNJ_00622_Large_ysbchr.jpg"
      />
    </div>

    <div class="flex flex-col-reverse lg:h-80 lg:flex-row lg:gap-4">
      <img
        src="https://res.cloudinary.com/dacrrezls/image/upload/f_auto,q_auto/tap6ajlfihfqwh95k9fw"
        class="h-[20rem] object-cover object-top motion-safe:transition-all motion-safe:hover:-rotate-1 motion-safe:hover:scale-105 motion-safe:hover:shadow-lg lg:h-auto lg:w-[36rem] lg:shrink-0"
      />

      <div
        class="flex grow flex-col gap-3 bg-primary-bg p-8 motion-safe:duration-500 motion-safe:hover:bg-violet-900"
      >
        <h2 class="text-4xl font-bold text-white">Make new friends</h2>
        <div class="space-y-3 font-sans">
          <p>
            Hackathons aren‚Äôt just time to code! At Apocalypse, you‚Äôll meet fun teenagers
            who love making as much as you do.
          </p>
          <p>
            From board games to karaoke nights, Apocalypse is one long social and a chance
            to befriend people you adore.
          </p>
        </div>
      </div>
    </div>

    <div class="flex flex-col lg:h-96 lg:flex-row lg:gap-4">
      <div
        class="flex grow flex-col gap-3 bg-gradient-to-tl from-fuchsia-700 to-purple-800 bg-300% bg-pos-0 p-8 motion-safe:transition-all motion-safe:duration-500 motion-safe:hover:bg-pos-100"
      >
        <h2 class="text-4xl font-bold text-white">Loads of surprises</h2>
        <div class="space-y-3 font-sans">
          <p>
            Apocalypse is <span class="italic">experimental</span> at heart! Keep an eye
            on our <a href="https://instagram.com/apohacks" class="underline">Instagram</a
            > for showcases of what we're cooking up. Unique swag, fun activities, and
            excursions are in the works üëÄ
          </p>
          <p>Are you ready to spark a new age of survival? Registrations are open!</p>
        </div>

        <!-- TODO: Add form itself here -->
        <!-- mt-auto self-start bg-purple-900 px-8 py-3 font-main text-2xl shadow-sm -->
        <form
          class="mt-auto flex border-b-2 border-purple-100 bg-purple-900 px-5 py-2 font-main text-2xl shadow-sm"
        >
          <!-- Coloring for <form> was originally bg-dark-bg shadow-[inset_5px_5px_rgba(0,0,0,0.3)] -->
          <!-- Fix alignment for this text -->
          <a
            class="flex-1 bg-transparent pt-0.5 text-2xl placeholder-white placeholder-opacity-75 hover:cursor-pointer focus:outline-none"
            href="https://join.apocalypse.hackclub.com"
          >
            Register now!</a
          >
          <label
            for="submit2"
            id="email-button2"
            class="group flex cursor-pointer items-center"
          >
            <svg
              class="motion-safe:group-hover:translate-x-17 h-7 w-7 text-purple-100 motion-safe:transition-transform"
              id="todo"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
            >
              <path
                d="M4 11v2h12v2h2v-2h2v-2h-2V9h-2v2H4zm10-4h2v2h-2V7zm0 0h-2V5h2v2zm0 10h2v-2h-2v2zm0 0h-2v2h2v-2z"
                fill="currentColor"
              >
              </path>
            </svg>
          </label>
        </form>
      </div>

      <img
        class="h-[20rem] object-cover motion-safe:transition-all motion-safe:hover:rotate-1 motion-safe:hover:scale-105 motion-safe:hover:shadow-lg lg:h-auto lg:w-[36rem] lg:shrink-0"
        src="https://res.cloudinary.com/dacrrezls/image/upload/f_auto,q_auto/ksawdi7rqsrpwxnvzfzh"
      />
    </div>
  </section>
</article>

<script>
  document.getElementById("email-form2").addEventListener("submit", (e) => {
    e.preventDefault();

    fetch("/api/lists/subscribe", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        email: (document.getElementById("email2") as HTMLFormElement).value,
      }),
    })
      .then((res) => {
        if (res.status === 200) {
          // Success: Switch to done and enable editing
          document.querySelector("#email-button2 #todo").classList.add("hidden");
          document.querySelector("#email-button2 #loading").classList.add("hidden");
          document.querySelector("#email-button2 #done").classList.remove("hidden");
          document.querySelector("#email-form2 #email2").removeAttribute("disabled");
          document
            .querySelector("#email-form2 #submit2")
            .setAttribute("disabled", "true");
        } else {
          // Failure: Switch to todo, enable editing and submitting
          document.querySelector("#email-button2 #todo").classList.remove("hidden");
          document.querySelector("#email-button2 #loading").classList.add("hidden");
          document.querySelector("#email-button2 #done").classList.add("hidden");
          document.querySelector("#email-form2 #email2").removeAttribute("disabled");
          document.querySelector("#email-form2 #submit2").removeAttribute("disabled");
        }
      })
      .catch(() => {
        // Failure: Switch to todo, enable editing and submitting
        document.querySelector("#email-button2 #todo").classList.remove("hidden");
        document.querySelector("#email-button2 #loading").classList.add("hidden");
        document.querySelector("#email-button2 #done").classList.add("hidden");
        document.querySelector("#email-form2 #email2").removeAttribute("disabled");
        document.querySelector("#email-form2 #submit2").removeAttribute("disabled");
      });

    // Loading: Switch to loading, disable editing and submitting
    document.querySelector("#email-button2 #todo").classList.add("hidden");
    document.querySelector("#email-button2 #loading").classList.remove("hidden");
    document.querySelector("#email-form2 #email2").setAttribute("disabled", "true");
    document.querySelector("#email-form2 #submit2").setAttribute("disabled", "true");
  });

  // Reset button when user starts typing
  document.querySelector("#email-form2 #email2").addEventListener("keydown", (e) => {
    document.querySelector("#email-button2 #todo").classList.remove("hidden");
    document.querySelector("#email-button2 #loading").classList.add("hidden");
    document.querySelector("#email-button2 #done").classList.add("hidden");
    document.querySelector("#email-form2 #submit2").removeAttribute("disabled");
  });
</script>
